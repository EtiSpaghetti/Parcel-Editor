var e=globalThis,t={},n={},r=e.parcelRequirea313;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in n){var r=n[e];delete n[e];var i={id:e,exports:{}};return t[e]=i,r.call(i.exports,i,i.exports),i.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},e.parcelRequirea313=r),r.register;var i=r("2h5uG"),a=r("hYoLG");const s=document.getElementById("add_event"),d=document.getElementById("show_panel"),o=document.getElementById("resource_information"),l=document.getElementById("saved_indicator");class c extends i.BaseEditorClass{init(){super.init(),this.renderResourcePanel(),this.updateSaveStatus()}update(){super.update(),this.renderResourcePanel(),this.updateSaveStatus()}generateEmptyParcel(e){return{id:`#${e}`,type:"interaction",comment:"",result:[],requires:[],consumes:[]}}create(){if(!this.confirmChangestateSave())return console.log("Cannot create parcel, was unable to save currently loaded parcel"),!1;let e=this.interactions.map(e=>Number(e.split("#")[1])),t=1,n=!1;for(;!n;)e.includes(t)?t++:n=!0;return this.current=this.generateEmptyParcel(t),this.save(),console.log(`Created ${this.current.id}`),this.update(),!0}updateSaveStatus(){if(void 0===this.current){l.className="undefined";return}if(this.isSaved){l.className="saved";return}if(!this.isError&&this.checkValidToSave()){l.className="unsaved";return}l.className="error"}checkAllInputValidity(){let e=o.getElementsByTagName("input");for(let t in e)if(e[t].reportValidity&&!e[t].reportValidity())return!1;return!0}checkValidToSave(){return!!super.checkValidToSave()&&(!!(0,a.regex_hash_number).test(this.current.id)||(console.warn(`Given invalid ID: ${this.current.id} to save`),this.isError=!0,this.updateSaveStatus(),!1))}clearRender(){d.innerHTML="",o.innerHTML="",this.renderResourcePanel()}renderResourcePanel(){d.innerHTML="";for(let e=0;e<this.interactions.length;e++){let t=document.createElement("button");t.innerHTML=this.interactions[e],t.addEventListener("click",()=>{console.log(`Loaded : ${this.interactions[e]}`),this.load(this.interactions[e]),this.renderResouceInformation(),this.updateSaveStatus()}),d.appendChild(t)}}renderResouceInformation(){if(void 0===this.current){console.warn("No resource loaded");return}o.innerHTML="";let e=document.createElement("div");e.id="tlpanel";let t=document.createElement("div");t.id="trpanel";let n=document.createElement("div");n.id="bpanel",e.appendChild(this.generateTextInput("id","ID",["notEmpty","readonly"])),e.appendChild(this.generateTextArea("comment","Comment",["spellcheck"]));let r=document.createElement("button");r.innerHTML="result",r.addEventListener("click",()=>{this.generateQuantityPanel("result",t)}),e.appendChild(r);let i=document.createElement("button");i.innerHTML="requires",i.addEventListener("click",()=>{this.generateQuantityPanel("requires",t)}),e.appendChild(i);let a=document.createElement("button");a.innerHTML="consumes",a.addEventListener("click",()=>{this.generateQuantityPanel("consumes",t)}),e.appendChild(a),n.appendChild(this.generateDeleteButton(`${this.current.type}:${this.current.id}`)),o.appendChild(e),o.appendChild(t),o.appendChild(n)}constructor(...e){super(...e),this.editorType="interaction",this.editorVersion=1}}const u=new c;u.init(),window.editor=u,s.addEventListener("click",()=>{u.create()}),l.addEventListener("click",()=>{u.save()}),document.getElementById("export_current").addEventListener("click",()=>{u.saveExportData("current")}),document.getElementById("export_all").addEventListener("click",()=>{u.saveExportData("editor")});
//# sourceMappingURL=interaction.2ea1e691.js.map

{"mappings":"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","sources":["<anon>","source/TypeScript/structure_editor.ts"],"sourcesContent":["\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequirea313\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequirea313\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\n\nvar $2h5uG = parcelRequire(\"2h5uG\");\n\nvar $hYoLG = parcelRequire(\"hYoLG\");\n// Empty add id manager\nconst $6ef502282caa8e23$var$ADD_ID = document.getElementById(\"resource_add_id\");\nconst $6ef502282caa8e23$var$ADD_BUTTON = document.getElementById(\"resource_add_button\");\nconst $6ef502282caa8e23$var$RESOURCE_PANEL = document.getElementById(\"show_panel\");\nconst $6ef502282caa8e23$var$RESOURCE_INFORMATION = document.getElementById(\"resource_information\");\nconst $6ef502282caa8e23$var$SAVED_INDICATOR = document.getElementById(\"saved_indicator\");\n// == Register editor ==\nclass $6ef502282caa8e23$var$StructureEditorClass extends (0, $2h5uG.BaseEditorClass) {\n    init() {\n        super.init();\n        this.renderResourcePanel();\n        this.updateSaveStatus();\n    }\n    update() {\n        super.update();\n        this.renderResourcePanel();\n        this.updateSaveStatus();\n    }\n    generateEmptyParcel(id, name) {\n        return {\n            id: id,\n            type: \"structure\",\n            name: name,\n            description: \"\",\n            symbol: \"\",\n            passive: 0,\n            additives: [],\n            multipliers: [],\n            onUnlock: [],\n            onReach: []\n        };\n    }\n    create() {\n        if (!this.confirmChangestateSave()) {\n            console.log(\"Cannot create parcel, was unable to save currently loaded parcel\");\n            return false;\n        }\n        if (!(0, $hYoLG.regex_id).test($6ef502282caa8e23$var$ADD_ID.value)) {\n            alert(\"Invalid ID\");\n            return false;\n        }\n        this.current = this.generateEmptyParcel($6ef502282caa8e23$var$ADD_ID.value, $6ef502282caa8e23$var$ADD_ID.value.replace(\"_\", \" \"));\n        $6ef502282caa8e23$var$ADD_ID.value = \"\";\n        this.save();\n        console.log(`Created ${this.current.id}`);\n        this.update();\n        return true;\n    }\n    updateSaveStatus() {\n        if (this.current === undefined) {\n            $6ef502282caa8e23$var$SAVED_INDICATOR.className = \"undefined\";\n            return;\n        } else if (this.isSaved) {\n            $6ef502282caa8e23$var$SAVED_INDICATOR.className = \"saved\";\n            return;\n        } else if (!this.isError && this.checkValidToSave()) {\n            $6ef502282caa8e23$var$SAVED_INDICATOR.className = \"unsaved\";\n            return;\n        } else {\n            $6ef502282caa8e23$var$SAVED_INDICATOR.className = \"error\";\n            return;\n        }\n    }\n    checkAllInputValidity() {\n        const inputs = $6ef502282caa8e23$var$RESOURCE_INFORMATION.getElementsByTagName(\"input\");\n        for(const i in inputs){\n            if (inputs[i].reportValidity && !inputs[i].reportValidity()) return false;\n        }\n        return true;\n    }\n    checkValidToSave() {\n        if (!super.checkValidToSave()) return false;\n        if (!(0, $hYoLG.regex_id).test(this.current.id)) {\n            console.warn(`Given invalid ID: ${this.current.id} to save`);\n            this.isError = true;\n            this.updateSaveStatus();\n            return false;\n        }\n        if (!(0, $hYoLG.regex_name).test(this.current.name)) {\n            console.warn(`Given invalid Name: ${this.current.name} to save`);\n            this.isError = true;\n            this.updateSaveStatus();\n            return false;\n        }\n        return true;\n    }\n    clearRender() {\n        $6ef502282caa8e23$var$RESOURCE_PANEL.innerHTML = \"\";\n        $6ef502282caa8e23$var$RESOURCE_INFORMATION.innerHTML = \"\";\n        this.renderResourcePanel();\n    }\n    renderResourcePanel() {\n        $6ef502282caa8e23$var$RESOURCE_PANEL.innerHTML = \"\";\n        for(let i = 0; i < this.structures.length; i++){\n            const button = document.createElement(\"button\");\n            button.innerHTML = this.structures[i];\n            button.addEventListener(\"click\", ()=>{\n                console.log(`Loaded : ${this.structures[i]}`);\n                this.load(this.structures[i]);\n                this.renderResouceInformation();\n            });\n            $6ef502282caa8e23$var$RESOURCE_PANEL.appendChild(button);\n        }\n    }\n    renderResouceInformation() {\n        // If this.current is undefined, return\n        if (this.current === undefined) {\n            console.warn(\"No structure loaded\");\n            return;\n        }\n        // Generate a set of inputs for the structure\n        $6ef502282caa8e23$var$RESOURCE_INFORMATION.innerHTML = \"\";\n        const tlpanel = document.createElement(\"div\");\n        tlpanel.id = \"tlpanel\";\n        const trpanel = document.createElement(\"div\");\n        trpanel.id = \"trpanel\";\n        const bpanel = document.createElement(\"div\");\n        bpanel.id = \"bpanel\";\n        // ID\n        tlpanel.appendChild(this.generateTextInput(\"id\", \"ID\", [\n            \"notEmpty\",\n            \"regexId\",\n            \"readonly\"\n        ]));\n        // Name\n        tlpanel.appendChild(this.generateTextInput(\"name\", \"Name\", [\n            \"spellcheck\",\n            \"notEmpty\",\n            \"regexName\"\n        ]));\n        // Symbol\n        tlpanel.appendChild(this.generateTextInput(\"symbol\", \"Symbol\"));\n        // Description\n        tlpanel.appendChild(this.generateTextArea(\"description\", \"Description\", [\n            \"spellcheck\"\n        ]));\n        // Passive generation\n        tlpanel.appendChild(this.generateNumberInput(\"passive\", \"Passive\", [\n            \"notNegative\"\n        ]));\n        // Additive charges\n        const additiveButton = document.createElement(\"button\");\n        additiveButton.innerHTML = \"Additive charges\";\n        additiveButton.addEventListener(\"click\", ()=>{\n            this.generateChargesPanel(trpanel, \"additives\");\n        });\n        tlpanel.append(additiveButton);\n        // Multiplicative charges\n        const multiplicativeButton = document.createElement(\"button\");\n        multiplicativeButton.innerHTML = \"Multiplicative charges\";\n        multiplicativeButton.addEventListener(\"click\", ()=>{\n            this.generateChargesPanel(trpanel, \"multipliers\");\n        });\n        tlpanel.append(multiplicativeButton);\n        // On Unlock\n        const onUnlockButton = document.createElement(\"button\");\n        onUnlockButton.innerHTML = \"onUnlock Events\";\n        onUnlockButton.addEventListener(\"click\", ()=>{\n            this.generateOnUnlock(trpanel);\n        });\n        tlpanel.append(onUnlockButton);\n        // On Reach\n        const onReachButton = document.createElement(\"button\");\n        onReachButton.innerHTML = \"onReach Events\";\n        onReachButton.addEventListener(\"click\", ()=>{\n            this.generateOnReach(trpanel);\n        });\n        tlpanel.append(onReachButton);\n        // Delete button\n        bpanel.appendChild(this.generateDeleteButton(`${this.current.type}:${this.current.id}`));\n        $6ef502282caa8e23$var$RESOURCE_INFORMATION.appendChild(tlpanel);\n        $6ef502282caa8e23$var$RESOURCE_INFORMATION.appendChild(trpanel);\n        $6ef502282caa8e23$var$RESOURCE_INFORMATION.appendChild(bpanel);\n    }\n    generateChargesPanel(WRAPPER, property) {\n        WRAPPER.innerHTML = \"\";\n        WRAPPER.className = \"chargeWrapper doubles\";\n        console.log(\"Rendering charges wrapper\");\n        if (this.current[property].length == 0) {\n            const notice = document.createElement(\"h2\");\n            notice.innerHTML = `No ${property}`;\n            WRAPPER.appendChild(notice);\n        }\n        for(const i in this.current[property]){\n            const inner_wrapper = document.createElement(\"div\");\n            const button = document.createElement(\"button\");\n            button.innerHTML = `Charge ${i}`;\n            button.addEventListener(\"click\", ()=>{\n                this.generateChargeEditingPanel(WRAPPER, this.current[property][i]);\n            });\n            inner_wrapper.append(button);\n            const inputDelete = document.createElement(\"button\");\n            inputDelete.innerHTML = \"X\";\n            inputDelete.addEventListener(\"click\", ()=>{\n                this.current[property].splice(Number(i), 1);\n                this.delayedSave();\n                this.generateChargesPanel(WRAPPER, property);\n            });\n            inner_wrapper.append(inputDelete);\n            WRAPPER.append(inner_wrapper);\n        }\n        const add_button = document.createElement(\"button\");\n        add_button.className = \"add\";\n        add_button.innerHTML = \"Add new onReach event\";\n        add_button.addEventListener(\"click\", ()=>{\n            this.current[property].push([\n                [],\n                0\n            ]);\n            this.delayedSave();\n            this.generateChargesPanel(WRAPPER, property);\n        });\n        WRAPPER.append(add_button);\n    }\n    generateChargeEditingPanel(WRAPPER, target) {\n        WRAPPER.innerHTML = \"\";\n        console.log(`Editing charge ${target[0]}`);\n        return;\n    }\n    constructor(...args){\n        super(...args);\n        this.editorType = \"structure\";\n        this.editorVersion = 1;\n    }\n}\n// == Initialize editor ==\n// Initialize editor, begin loading process and attach editor to window\nconst $6ef502282caa8e23$var$editor = new $6ef502282caa8e23$var$StructureEditorClass();\n$6ef502282caa8e23$var$editor.init();\nwindow.editor = $6ef502282caa8e23$var$editor;\n$6ef502282caa8e23$var$ADD_ID.addEventListener(\"input\", ()=>{\n    if ($6ef502282caa8e23$var$ADD_ID.value === \"\") $6ef502282caa8e23$var$ADD_ID.classList.add(\"empty\");\n    else $6ef502282caa8e23$var$ADD_ID.classList.remove(\"empty\");\n});\n$6ef502282caa8e23$var$ADD_BUTTON.addEventListener(\"click\", ()=>{\n    $6ef502282caa8e23$var$editor.create();\n});\n$6ef502282caa8e23$var$SAVED_INDICATOR.addEventListener(\"click\", ()=>{\n    $6ef502282caa8e23$var$editor.save();\n});\n// Exports\nconst $6ef502282caa8e23$var$EXPORT_BUTTON = document.getElementById(\"export_current\");\n$6ef502282caa8e23$var$EXPORT_BUTTON.addEventListener(\"click\", ()=>{\n    $6ef502282caa8e23$var$editor.saveExportData(\"current\");\n});\nconst $6ef502282caa8e23$var$EXPORT_ALL_BUTTON = document.getElementById(\"export_all\");\n$6ef502282caa8e23$var$EXPORT_ALL_BUTTON.addEventListener(\"click\", ()=>{\n    $6ef502282caa8e23$var$editor.saveExportData(\"editor\");\n});\n\n\n//# sourceMappingURL=structure.1b05ae7b.js.map\n","import { BaseEditorClass } from \"./editor_base\";\nimport { structure_interface } from \"./parcel_interfaces\";\nimport { regex_id, regex_name } from \"./regexes\";\nimport { parcel_charges } from \"./types\";\n\n// Empty add id manager\nconst ADD_ID = document.getElementById(\"resource_add_id\") as HTMLInputElement;\nconst ADD_BUTTON = document.getElementById(\"resource_add_button\") as HTMLButtonElement;\n\nconst RESOURCE_PANEL = document.getElementById(\"show_panel\") as HTMLDivElement;\nconst RESOURCE_INFORMATION = document.getElementById(\"resource_information\") as HTMLDivElement;\nconst SAVED_INDICATOR = document.getElementById(\"saved_indicator\") as HTMLDivElement;\n\n// == Register editor ==\nclass StructureEditorClass extends BaseEditorClass {\n\tpublic editorType = \"structure\" as const;\n\tpublic editorVersion: number = 1;\n\n\tpublic current: structure_interface;\n\n\tinit() {\n\t\tsuper.init();\n\t\tthis.renderResourcePanel();\n\t\tthis.updateSaveStatus();\n\t}\n\n\tupdate() {\n\t\tsuper.update();\n\t\tthis.renderResourcePanel();\n\t\tthis.updateSaveStatus();\n\t}\n\n\tgenerateEmptyParcel(id: string, name: string): structure_interface {\n\t\treturn {\n\t\t\tid: id,\n\t\t\ttype: \"structure\",\n\t\t\tname: name,\n\t\t\tdescription: \"\",\n\t\t\tsymbol: \"\",\n\t\t\tpassive: 0,\n\t\t\tadditives: [],\n\t\t\tmultipliers: [],\n\t\t\tonUnlock: [],\n\t\t\tonReach: [],\n\t\t};\n\t}\n\n\tcreate(): boolean {\n\t\tif (!this.confirmChangestateSave()) {\n\t\t\tconsole.log(\"Cannot create parcel, was unable to save currently loaded parcel\");\n\t\t\treturn false;\n\t\t}\n\t\tif (!regex_id.test(ADD_ID.value)) {\n\t\t\talert(\"Invalid ID\");\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.current = this.generateEmptyParcel(ADD_ID.value, ADD_ID.value.replace(\"_\", \" \"));\n\t\tADD_ID.value = \"\";\n\t\tthis.save();\n\t\tconsole.log(`Created ${this.current.id}`);\n\n\t\tthis.update();\n\n\t\treturn true;\n\t}\n\n\tupdateSaveStatus(): void {\n\t\tif (this.current === undefined) {\n\t\t\tSAVED_INDICATOR.className = \"undefined\";\n\t\t\treturn;\n\t\t} else if (this.isSaved) {\n\t\t\tSAVED_INDICATOR.className = \"saved\";\n\t\t\treturn;\n\t\t} else if (!this.isError && this.checkValidToSave()) {\n\t\t\tSAVED_INDICATOR.className = \"unsaved\";\n\t\t\treturn;\n\t\t} else {\n\t\t\tSAVED_INDICATOR.className = \"error\";\n\t\t\treturn;\n\t\t}\n\t}\n\n\tcheckAllInputValidity(): boolean {\n\t\tconst inputs = RESOURCE_INFORMATION.getElementsByTagName(\"input\");\n\t\tfor (const i in inputs) {\n\t\t\tif (inputs[i].reportValidity && !inputs[i].reportValidity()) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tcheckValidToSave(): boolean {\n\t\tif (!super.checkValidToSave()) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!regex_id.test(this.current.id)) {\n\t\t\tconsole.warn(`Given invalid ID: ${this.current.id} to save`);\n\t\t\tthis.isError = true;\n\t\t\tthis.updateSaveStatus();\n\t\t\treturn false;\n\t\t}\n\t\tif (!regex_name.test(this.current.name)) {\n\t\t\tconsole.warn(`Given invalid Name: ${this.current.name} to save`);\n\t\t\tthis.isError = true;\n\t\t\tthis.updateSaveStatus();\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tclearRender() {\n\t\tRESOURCE_PANEL.innerHTML = \"\";\n\t\tRESOURCE_INFORMATION.innerHTML = \"\";\n\t\tthis.renderResourcePanel();\n\t}\n\n\trenderResourcePanel() {\n\t\tRESOURCE_PANEL.innerHTML = \"\";\n\t\tfor (let i = 0; i < this.structures.length; i++) {\n\t\t\tconst button = document.createElement(\"button\");\n\t\t\tbutton.innerHTML = this.structures[i];\n\t\t\tbutton.addEventListener(\"click\", () => {\n\t\t\t\tconsole.log(`Loaded : ${this.structures[i]}`);\n\t\t\t\tthis.load(this.structures[i]);\n\t\t\t\tthis.renderResouceInformation();\n\t\t\t});\n\t\t\tRESOURCE_PANEL.appendChild(button);\n\t\t}\n\t}\n\n\trenderResouceInformation() {\n\t\t// If this.current is undefined, return\n\t\tif (this.current === undefined) {\n\t\t\tconsole.warn(\"No structure loaded\");\n\t\t\treturn;\n\t\t}\n\t\t// Generate a set of inputs for the structure\n\t\tRESOURCE_INFORMATION.innerHTML = \"\";\n\n\t\tconst tlpanel = document.createElement(\"div\") as HTMLDivElement;\n\t\ttlpanel.id = \"tlpanel\";\n\t\tconst trpanel = document.createElement(\"div\") as HTMLDivElement;\n\t\ttrpanel.id = \"trpanel\";\n\t\tconst bpanel = document.createElement(\"div\") as HTMLDivElement;\n\t\tbpanel.id = \"bpanel\";\n\n\t\t// ID\n\t\ttlpanel.appendChild(this.generateTextInput(\"id\", \"ID\", [\"notEmpty\", \"regexId\", \"readonly\"]));\n\t\t// Name\n\t\ttlpanel.appendChild(this.generateTextInput(\"name\", \"Name\", [\"spellcheck\", \"notEmpty\", \"regexName\"]));\n\t\t// Symbol\n\t\ttlpanel.appendChild(this.generateTextInput(\"symbol\", \"Symbol\"));\n\t\t// Description\n\t\ttlpanel.appendChild(this.generateTextArea(\"description\", \"Description\", [\"spellcheck\"]));\n\n\t\t// Passive generation\n\t\ttlpanel.appendChild(this.generateNumberInput(\"passive\", \"Passive\", [\"notNegative\"]));\n\t\t// Additive charges\n\t\tconst additiveButton = document.createElement(\"button\");\n\t\tadditiveButton.innerHTML = \"Additive charges\";\n\t\tadditiveButton.addEventListener(\"click\", () => {\n\t\t\tthis.generateChargesPanel(trpanel, \"additives\");\n\t\t});\n\t\ttlpanel.append(additiveButton);\n\t\t// Multiplicative charges\n\t\tconst multiplicativeButton = document.createElement(\"button\");\n\t\tmultiplicativeButton.innerHTML = \"Multiplicative charges\";\n\t\tmultiplicativeButton.addEventListener(\"click\", () => {\n\t\t\tthis.generateChargesPanel(trpanel, \"multipliers\");\n\t\t});\n\t\ttlpanel.append(multiplicativeButton);\n\n\t\t// On Unlock\n\t\tconst onUnlockButton = document.createElement(\"button\");\n\t\tonUnlockButton.innerHTML = \"onUnlock Events\";\n\t\tonUnlockButton.addEventListener(\"click\", () => {\n\t\t\tthis.generateOnUnlock(trpanel);\n\t\t});\n\t\ttlpanel.append(onUnlockButton);\n\t\t// On Reach\n\t\tconst onReachButton = document.createElement(\"button\");\n\t\tonReachButton.innerHTML = \"onReach Events\";\n\t\tonReachButton.addEventListener(\"click\", () => {\n\t\t\tthis.generateOnReach(trpanel);\n\t\t});\n\t\ttlpanel.append(onReachButton);\n\t\t// Delete button\n\t\tbpanel.appendChild(this.generateDeleteButton(`${this.current.type}:${this.current.id}`));\n\n\t\tRESOURCE_INFORMATION.appendChild(tlpanel);\n\t\tRESOURCE_INFORMATION.appendChild(trpanel);\n\t\tRESOURCE_INFORMATION.appendChild(bpanel);\n\t}\n\tgenerateChargesPanel(WRAPPER: HTMLDivElement, property: \"additives\" | \"multipliers\") {\n\t\tWRAPPER.innerHTML = \"\";\n\t\tWRAPPER.className = \"chargeWrapper doubles\";\n\t\tconsole.log(\"Rendering charges wrapper\");\n\n\t\tif (this.current[property].length == 0) {\n\t\t\tconst notice = document.createElement(\"h2\");\n\t\t\tnotice.innerHTML = `No ${property}`;\n\t\t\tWRAPPER.appendChild(notice);\n\t\t}\n\n\t\tfor (const i in this.current[property]) {\n\t\t\tconst inner_wrapper = document.createElement(\"div\");\n\n\t\t\tconst button = document.createElement(\"button\");\n\t\t\tbutton.innerHTML = `Charge ${i}`;\n\t\t\tbutton.addEventListener(\"click\", () => {\n\t\t\t\tthis.generateChargeEditingPanel(WRAPPER, this.current[property][i]);\n\t\t\t});\n\t\t\tinner_wrapper.append(button);\n\n\t\t\tconst inputDelete = document.createElement(\"button\");\n\t\t\tinputDelete.innerHTML = \"X\";\n\t\t\tinputDelete.addEventListener(\"click\", () => {\n\t\t\t\tthis.current[property].splice(Number(i), 1);\n\t\t\t\tthis.delayedSave();\n\t\t\t\tthis.generateChargesPanel(WRAPPER, property);\n\t\t\t});\n\n\t\t\tinner_wrapper.append(inputDelete);\n\t\t\tWRAPPER.append(inner_wrapper);\n\t\t}\n\n\t\tconst add_button = document.createElement(\"button\");\n\t\tadd_button.className = \"add\";\n\t\tadd_button.innerHTML = \"Add new onReach event\";\n\t\tadd_button.addEventListener(\"click\", () => {\n\t\t\tthis.current[property].push([[], 0]);\n\t\t\tthis.delayedSave();\n\t\t\tthis.generateChargesPanel(WRAPPER, property);\n\t\t});\n\t\tWRAPPER.append(add_button);\n\t}\n\tgenerateChargeEditingPanel(WRAPPER: HTMLDivElement, target: parcel_charges) {\n\t\tWRAPPER.innerHTML = \"\";\n\t\tconsole.log(`Editing charge ${target[0]}`);\n\t\treturn;\n\t}\n}\n// == Initialize editor ==\n// Initialize editor, begin loading process and attach editor to window\nconst editor = new StructureEditorClass();\neditor.init();\nwindow.editor = editor;\n\nADD_ID.addEventListener(\"input\", () => {\n\tif (ADD_ID.value === \"\") {\n\t\tADD_ID.classList.add(\"empty\");\n\t} else {\n\t\tADD_ID.classList.remove(\"empty\");\n\t}\n});\nADD_BUTTON.addEventListener(\"click\", () => {\n\teditor.create();\n});\n\nSAVED_INDICATOR.addEventListener(\"click\", () => {\n\teditor.save();\n});\n\n// Exports\n\nconst EXPORT_BUTTON = document.getElementById(\"export_current\") as HTMLButtonElement;\nEXPORT_BUTTON.addEventListener(\"click\", () => {\n\teditor.saveExportData(\"current\")\n})\n\nconst EXPORT_ALL_BUTTON = document.getElementById(\"export_all\") as HTMLButtonElement;\nEXPORT_ALL_BUTTON.addEventListener(\"click\", () => {\n\teditor.saveExportData(\"editor\");\n});"],"names":["$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$2h5uG","$hYoLG","$6ef502282caa8e23$var$ADD_ID","document","getElementById","$6ef502282caa8e23$var$ADD_BUTTON","$6ef502282caa8e23$var$RESOURCE_PANEL","$6ef502282caa8e23$var$RESOURCE_INFORMATION","$6ef502282caa8e23$var$SAVED_INDICATOR","$6ef502282caa8e23$var$StructureEditorClass","BaseEditorClass","renderResourcePanel","updateSaveStatus","update","generateEmptyParcel","name","type","description","symbol","passive","additives","multipliers","onUnlock","onReach","create","confirmChangestateSave","regex_id","test","value","current","replace","save","console","log","alert","undefined","className","isSaved","isError","checkValidToSave","checkAllInputValidity","inputs","getElementsByTagName","i","reportValidity","regex_name","warn","clearRender","innerHTML","structures","length","button","createElement","addEventListener","load","renderResouceInformation","appendChild","tlpanel","trpanel","bpanel","generateTextInput","generateTextArea","generateNumberInput","additiveButton","generateChargesPanel","append","multiplicativeButton","onUnlockButton","generateOnUnlock","onReachButton","generateOnReach","generateDeleteButton","WRAPPER","property","notice","inner_wrapper","generateChargeEditingPanel","inputDelete","splice","Number","delayedSave","add_button","push","target","constructor","args","editorType","editorVersion","$6ef502282caa8e23$var$editor","window","editor","classList","add","remove","$6ef502282caa8e23$var$EXPORT_BUTTON","saveExportData","$6ef502282caa8e23$var$EXPORT_ALL_BUTTON"],"version":3,"file":"structure.1b05ae7b.js.map"}
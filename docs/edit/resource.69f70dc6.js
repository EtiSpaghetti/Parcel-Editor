function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t=globalThis,n={},r={},i=t.parcelRequirea313;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){r[e]=t},t.parcelRequirea313=i);var s=i.register;s("2h5uG",function(t,n){e(t.exports,"BaseEditorClass",()=>a);var r=i("6F8RI"),s=i("hYoLG");class a{init(){console.log(`Parcel Editor Version ${r.editor_version} - Starting up.
Loading ${this.editorType} editor - Version ${this.editorVersion}`),this.checkStorage(),this.logStorageCount(),this.logStorage(),0==this.unique.length&&this.registerUnique()}registerUnique(){let e={id:"quintessence",type:"unique",name:"Quintessence",description:"The raw power of creation, it is so hard to refine however that it is used as the worlds most stable currency!",symbol:"\uD83E\uDE99"},t=`${e.type}:${e.id}`;localStorage.setItem(t,JSON.stringify(e))}update(){this.checkStorage()}checkStorage(){this.parcels=[];for(let e=0;e<localStorage.length;e++)(0,s.regex_id_full).test(localStorage.key(e))&&this.parcels.push(localStorage.key(e));this.sortStorage()}sortStorage(){this.parcels.sort((e,t)=>e.localeCompare(t)),this.resources=this.parcels.filter(e=>e.startsWith("resource:")),this.structures=this.parcels.filter(e=>e.startsWith("structure:")),this.research=this.parcels.filter(e=>e.startsWith("research:")),this.unique=this.parcels.filter(e=>e.startsWith("unique:")),this.interactions=this.parcels.filter(e=>e.startsWith("interaction:")),this.events=this.parcels.filter(e=>e.startsWith("event:"))}logStorage(){console.table({Resources:this.resources,Structures:this.structures,Research:this.research,Unique:this.unique,Interactions:this.interactions,Events:this.events})}logStorageCount(){console.table({Total:[this.parcels.length],Resources:[this.resources.length],Structures:[this.structures.length],Research:[this.research.length],Unique:[this.unique.length],Interactions:[this.interactions.length],Events:[this.events.length]})}save(){if(!this.checkValidToSave())return console.warn("Parcel is not valid and cannot be saved"),this.isError=!0,this.updateSaveStatus(),!1;let e=`${this.editorType}:${this.current.id}`;return this.saveTimeout&&clearTimeout(this.saveTimeout),localStorage.setItem(e,JSON.stringify(this.current)),this.isSaved=!0,this.isError=!1,this.updateSaveStatus(),console.info(`Saved ${e}`),!0}checkValidToSave(){if(void 0===this.current)return console.warn("No parcel loaded, not saving"),this.isError=!0,this.updateSaveStatus(),!1;let e=`${this.editorType}:${this.current.id}`;return(0,s.regex_id_full).test(e)?this.checkAllInputValidity()?(this.isError=!1,!0):(console.warn("There is an invalid input in the editor!"),this.isError=!0,this.updateSaveStatus(),!1):(console.warn(`Given invalid full ID: ${e} to save`),this.isError=!0,this.updateSaveStatus(),!1)}delayedSave(){this.isSaved=!1,this.saveTimeout&&clearTimeout(this.saveTimeout),this.saveTimeout=window.setTimeout(()=>{this.save()},5e3),this.updateSaveStatus()}confirmChangestateSave(){return void 0===this.current||!!this.save()||!!confirm("Unable to save, are you sure you would like to continue?")}load(e){if(!this.confirmChangestateSave())return!1;if(!1===(0,s.regex_id_full).test(e))return console.warn(`Given invalid full ID: ${e} to load`),!1;if(!1===e.startsWith(this.editorType))return console.warn(`Given wrong editor type: ${e} to load
 Expected: ${this.editorType}`),!1;let t=JSON.parse(localStorage.getItem(e));if(null===t)return console.warn(`Given parcel doesn't exist: ${e} to load`),!1;let n=this.generateEmptyParcel(t.id,"Undefined Name");return Object.assign(n,t),this.current=n,!0}exportData(e){this.save();let t=localStorage.getItem(e);if(null===t){console.error(`Given ${e} to export, failed to find in localStorage`);return}return t}exportAllData(e){if(this.checkStorage(),void 0===this[e])return console.error(`${e} is not a valid parcel type. Unable to export data.`),"";let t={};for(let n of this[e]){let e=this.exportData(n);if(void 0===e)return console.error(`Was unable to load ${n}. Unable to export data.`),"";t[n]=JSON.parse(e)}return console.log(`Exported all the ${e} parcels.`),console.table(t),JSON.stringify(t)}saveExportData(e){let t,n,r,i;if("editor"===e){switch(this.editorType){case"resource":case"interaction":case"event":case"structure":i=this.editorType+"s";break;case"research":case"unique":i=this.editorType}r=`${i}.json`,console.log(n=new Blob([this.exportAllData(i)],{type:"text/plain"}))}else{if("current"===e&&(e=`${this.editorType}:${this.current.id}`),void 0===(t=this.exportData(e)))return!1;n=new Blob([t],{type:"text/plain"}),r=`${e}.json`}return this.generateFile(n,r),!0}generateFile(e,t){let n=URL.createObjectURL(e),r=document.createElement("a");r.download=t,r.href=n,r.click(),URL.revokeObjectURL(n)}delete(e){return!1===(0,s.regex_id_full).test(e)?(console.warn(`Given invalid full ID: ${e} to delete`),!1):(void 0!==this.current&&`${this.current.type}:${this.current.id}`===e&&(this.current=void 0,this.clearRender()),localStorage.removeItem(e),console.log(`Deleted ${e}`),this.update(),!0)}registerInvalid(e){return!1===(0,s.regex_id_full).test(e)?(console.warn(`Given invalid full ID: ${e} to register as invalid`),!1):(JSON.parse(localStorage.getItem("editor_knownInvalids")||"[]").push([e,!0]),!0)}generateTextInput(e,t,n=[]){let r=document.createElement("div"),i=document.createElement("label");i.innerHTML=t;let s=document.createElement("input");return s.value=this.current[e],s.addEventListener("input",()=>{this.current[e]=s.value,this.delayedSave()}),n.includes("spellcheck")&&(s.spellcheck=!0),n.includes("notEmpty")&&(s.minLength=1,s.required=!0),n.includes("readonly")&&(s.readOnly=!0),n.includes("regexId")?s.pattern="[a-z]([a-z_]*[a-z])?":n.includes("regexName")&&(s.pattern="[a-zA-Z](?:[a-zA-Z ]*[a-zA-Z])?"),r.appendChild(i),r.appendChild(s),r}generateTextArea(e,t,n=[]){let r=document.createElement("div"),i=document.createElement("label");i.innerHTML=t;let s=document.createElement("textarea");return s.value=this.current[e],s.rows=4,s.addEventListener("input",()=>{this.current[e]=s.value,this.delayedSave()}),n.includes("spellcheck")&&(s.spellcheck=!0),n.includes("notEmpty")&&(s.minLength=1,s.required=!0),n.includes("readonly")&&(s.readOnly=!0),r.appendChild(i),r.appendChild(s),r}generateNumberInput(e,t,n=[]){let r=document.createElement("div"),i=document.createElement("label");i.innerHTML=t;let s=document.createElement("input");return s.type="number",s.value=this.current[e],s.addEventListener("input",()=>{Number.isNaN(s.valueAsNumber)?this.isError=!0:this.current[e]=Number(s.valueAsNumber),this.delayedSave()}),n.includes("notNegative")?s.min="0":n.includes("notZero")&&(s.min="1"),n.includes("notEmpty")&&(s.required=!0),r.appendChild(i),r.appendChild(s),r}generateDeleteButton(e){let t=document.createElement("div");t.className="delete";let n=document.createElement("button");return n.innerHTML="Delete",n.addEventListener("click",()=>{confirm("Deletion is permanent, are you sure you want to continue?")&&this.delete(e)}),t.append(n),t}generateOnUnlock(e){if(void 0===this.current||void 0===this.current.onUnlock)return!1;if(e.className="onUnlockWrapper doubles",e.innerHTML="",0==this.events.length){let t=document.createElement("h2");return t.innerHTML="No events found",e.appendChild(t),!1}if(0==this.current.onUnlock.length){let t=document.createElement("h2");t.innerHTML="No onUnlock",e.appendChild(t)}for(let t in this.current.onUnlock){let n=document.createElement("div");console.log(this.current.onUnlock),console.log(this.current.onUnlock[t]);let r=this.generateSelectElement(["events"]);r.value=this.current.onUnlock[t],r.addEventListener("change",()=>{this.current.onUnlock[t]=r.value,this.delayedSave(),this.generateOnUnlock(e)});let i=document.createElement("button");i.innerHTML="X",i.addEventListener("click",()=>{this.current.onUnlock.splice(Number(t),1),this.delayedSave(),this.generateOnUnlock(e)}),n.appendChild(r),n.appendChild(i),e.append(n)}let t=document.createElement("button");return t.className="add",t.innerHTML="Add new onUnlock event",t.addEventListener("click",()=>{this.current.onUnlock.push("#0"),this.delayedSave(),this.generateOnUnlock(e)}),e.append(t),!0}generateOnReach(e){if(void 0===this.current||void 0===this.current.onReach)return!1;if(e.className="onReachWrapper triples",e.innerHTML="",0==this.events.length){let t=document.createElement("h2");return t.innerHTML="No events found",e.appendChild(t),!1}if(0==this.current.onReach.length){let t=document.createElement("h2");t.innerHTML="No onReach",e.appendChild(t)}for(let t in this.current.onReach){let n=document.createElement("div"),r=document.createElement("input");r.value=String(this.current.onReach[t][0]),r.type="number",r.addEventListener("change",()=>{this.current.onReach[t][0]=r.valueAsNumber,this.delayedSave()});let i=this.generateSelectElement(["events"]);i.value=this.current.onReach[t][1],i.addEventListener("change",()=>{this.current.onReach[t][1]=i.value,this.delayedSave(),this.generateOnReach(e)});let s=document.createElement("button");s.innerHTML="X",s.addEventListener("click",()=>{this.current.onReach.splice(Number(t),1),this.delayedSave(),this.generateOnReach(e)}),n.appendChild(r),n.appendChild(i),n.appendChild(s),e.append(n)}let t=document.createElement("button");return t.className="add",t.innerHTML="Add new onReach event",t.addEventListener("click",()=>{this.current.onReach.push([5,"#0"]),this.delayedSave(),this.generateOnReach(e)}),e.append(t),!0}generateSelectElement(e){let t=document.createElement("select");for(let n in e){let r=e[n];for(let e in this[r]){let n=document.createElement("option");n.innerHTML=this[r][e],n.value=this[r][e],t.appendChild(n)}}return t}generateQuantityPanel(e,t){if(console.log("Generating"),t.innerHTML="",t.className=`${e} triples`,void 0===this.current)return!1;if(0==this.current[e].length){let n=document.createElement("h2");n.innerHTML=`No ${e}`,t.appendChild(n)}let n=[];for(let r in n="action"==e?["resources","structures","research","unique"]:"consumes"==e?["resources"]:["resources","structures","research"],this.current[e]){let i=document.createElement("div"),s=this.generateSelectElement(n);s.value=this.current[e][r][0],s.addEventListener("change",()=>{this.current[e][r][0]=s.value,this.delayedSave()});let a=document.createElement("input");a.value=this.current[e][r][1],a.type="number",a.addEventListener("change",()=>{this.current[e][r][1]=a.valueAsNumber,this.delayedSave()});let l=document.createElement("button");l.innerHTML="X",l.addEventListener("click",()=>{this.current[e].splice(Number(r),1),this.generateQuantityPanel(e,t),this.delayedSave()}),i.appendChild(s),i.appendChild(a),i.appendChild(l),t.append(i)}let r=document.createElement("button");return r.className="add",r.innerHTML="Add new "+e,r.addEventListener("click",()=>{this.current[e].push(["",0]),this.generateQuantityPanel(e,t)}),t.append(r),!0}constructor(){this.isSaved=!0,this.isError=!1,this.parcels=[],this.resources=[],this.structures=[],this.research=[],this.unique=[],this.interactions=[],this.events=[]}}}),s("6F8RI",function(t,n){e(t.exports,"editor_version",()=>r);let r="7.2.23"}),s("hYoLG",function(t,n){e(t.exports,"regex_id",()=>r),e(t.exports,"regex_name",()=>i),e(t.exports,"regex_id_full",()=>s),e(t.exports,"regex_number",()=>a),e(t.exports,"regex_hash_number",()=>l);let r=RegExp("^[a-z]([a-z_]*[a-z])?$"),i=RegExp("^[a-zA-Z](?:[a-zA-Z ]*[a-zA-Z])?$"),s=RegExp("(^(resource|structure|research|unique):(([a-z]([a-z_]*[a-z])?))$)|(^(interaction|event):#[0-9]*)$"),a=RegExp("^([0-9])*$"),l=RegExp("^#([0-9])*$")});
//# sourceMappingURL=resource.69f70dc6.js.map

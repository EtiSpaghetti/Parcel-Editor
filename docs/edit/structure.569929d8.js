var e=globalThis,t={},n={},r=e.parcelRequirea313;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in n){var r=n[e];delete n[e];var i={id:e,exports:{}};return t[e]=i,r.call(i.exports,i,i.exports),i.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},e.parcelRequirea313=r),r.register;var i=r("2h5uG"),a=r("hYoLG");const s=document.getElementById("resource_add_id"),d=document.getElementById("resource_add_button"),l=document.getElementById("show_panel"),o=document.getElementById("resource_information"),c=document.getElementById("saved_indicator");class u extends i.BaseEditorClass{init(){super.init(),this.renderResourcePanel(),this.updateSaveStatus()}update(){super.update(),this.renderResourcePanel(),this.updateSaveStatus()}generateEmptyParcel(e,t){return{id:e,type:"structure",name:t,description:"",symbol:"",passive:0,additives:[],multipliers:[],onUnlock:[],onReach:[]}}create(){return this.confirmChangestateSave()?(0,a.regex_id).test(s.value)?(this.current=this.generateEmptyParcel(s.value,s.value.replace("_"," ")),s.value="",this.save(),console.log(`Created ${this.current.id}`),this.update(),!0):(alert("Invalid ID"),!1):(console.log("Cannot create parcel, was unable to save currently loaded parcel"),!1)}updateSaveStatus(){if(void 0===this.current){c.className="undefined";return}if(this.isSaved){c.className="saved";return}if(!this.isError&&this.checkValidToSave()){c.className="unsaved";return}c.className="error"}checkAllInputValidity(){let e=o.getElementsByTagName("input");for(let t in e)if(e[t].reportValidity&&!e[t].reportValidity())return!1;return!0}checkValidToSave(){return!!super.checkValidToSave()&&((0,a.regex_id).test(this.current.id)?!!(0,a.regex_name).test(this.current.name)||(console.warn(`Given invalid Name: ${this.current.name} to save`),this.isError=!0,this.updateSaveStatus(),!1):(console.warn(`Given invalid ID: ${this.current.id} to save`),this.isError=!0,this.updateSaveStatus(),!1))}clearRender(){l.innerHTML="",o.innerHTML="",this.renderResourcePanel()}renderResourcePanel(){l.innerHTML="";for(let e=0;e<this.structures.length;e++){let t=document.createElement("button");t.innerHTML=this.structures[e],t.addEventListener("click",()=>{console.log(`Loaded : ${this.structures[e]}`),this.load(this.structures[e]),this.renderResouceInformation()}),l.appendChild(t)}}renderResouceInformation(){if(void 0===this.current){console.warn("No structure loaded");return}o.innerHTML="";let e=document.createElement("div");e.id="tlpanel";let t=document.createElement("div");t.id="trpanel";let n=document.createElement("div");n.id="bpanel",e.appendChild(this.generateTextInput("id","ID",["notEmpty","regexId","readonly"])),e.appendChild(this.generateTextInput("name","Name",["spellcheck","notEmpty","regexName"])),e.appendChild(this.generateTextInput("symbol","Symbol")),e.appendChild(this.generateTextArea("description","Description",["spellcheck"])),e.appendChild(this.generateNumberInput("passive","Passive",["notNegative"]));let r=document.createElement("button");r.innerHTML="onUnlock Events",r.addEventListener("click",()=>{this.generateOnUnlock(t)}),e.append(r);let i=document.createElement("button");i.innerHTML="onReach Events",i.addEventListener("click",()=>{this.generateOnReach(t)}),e.append(i),n.appendChild(this.generateDeleteButton(`${this.current.type}:${this.current.id}`)),o.appendChild(e),o.appendChild(t),o.appendChild(n)}constructor(...e){super(...e),this.editorType="structure",this.editorVersion=1}}const p=new u;p.init(),window.editor=p,s.addEventListener("input",()=>{""===s.value?s.classList.add("empty"):s.classList.remove("empty")}),d.addEventListener("click",()=>{p.create()}),c.addEventListener("click",()=>{p.save()});
//# sourceMappingURL=structure.569929d8.js.map
